# 高校实验室设备管理系统接口文档

## 1. 文档概述

### 1.1 文档目的
本接口文档详细描述了高校实验室设备管理系统的所有API接口，包括接口URL、请求方法、请求参数、响应格式等信息，旨在为前端开发人员、后端开发人员和测试人员提供清晰的接口使用指南。

### 1.2 系统架构
- 后端框架：Spring Boot 3.5.9
- 前端框架：Vue.js 3
- 认证机制：JWT（JSON Web Token）
- 权限控制：Spring Security + RBAC（基于角色的访问控制）
- 数据存储：MySQL 8.0

### 1.3 接口版本
当前接口版本：v1

## 2. 接口规范

### 2.1 接口URL格式
所有接口URL遵循以下格式：
```
http(s)://{服务器地址}:{端口}/api/v1/{模块名}/{接口名}
```

示例：
```
http://localhost:8080/api/v1/auth/login
http://localhost:8080/api/v1/equipment/list
```

### 2.2 请求方法
支持的HTTP请求方法：
- GET：获取资源
- POST：创建资源
- PUT：更新资源
- DELETE：删除资源
- PATCH：部分更新资源

### 2.3 请求参数

#### 2.3.1 查询参数
用于GET请求中，以URL参数形式传递：
```
http://localhost:8080/api/v1/equipment/list?page=1&size=10&status=instored
```

#### 2.3.2 请求体参数
用于POST、PUT、PATCH请求中，以JSON格式传递：
```json
{
  "name": "设备名称",
  "model": "设备型号",
  "specification": "设备规格"
}
```

#### 2.3.3 路径参数
用于URL路径中，标识特定资源：
```
http://localhost:8080/api/v1/equipment/{id}
```

### 2.4 响应格式

所有接口返回统一的JSON格式：

#### 2.4.1 成功响应
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {}
}
```

#### 2.4.2 分页响应
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "list": [],
    "total": 100,
    "page": 1,
    "size": 10
  }
}
```

#### 2.4.3 失败响应
```json
{
  "code": 400,
  "message": "操作失败：参数错误",
  "data": null
}
```

### 2.5 认证方式

#### 2.5.1 JWT Token
系统采用JWT进行身份认证，登录成功后会返回Token，后续请求需要在请求头中携带Token：

```
Authorization: Bearer {token}
```

#### 2.5.2 Token过期
Token过期后，需要重新登录获取新的Token。

### 2.6 错误码

| 错误码 | 描述 |
|--------|------|
| 200 | 操作成功 |
| 400 | 请求参数错误 |
| 401 | 未授权或Token过期 |
| 403 | 拒绝访问 |
| 404 | 资源不存在 |
| 500 | 服务器内部错误 |
| 501 | 接口未实现 |
| 502 | 网关错误 |
| 503 | 服务不可用 |

## 3. 模块划分

系统接口分为以下几个模块：

1. **认证模块（Auth）**：登录、注销等
2. **用户管理模块（User）**：用户信息、角色管理等
3. **设备管理模块（Equipment）**：设备信息、状态管理等
4. **实验室管理模块（Laboratory）**：实验室信息、状态管理等
5. **设备借用模块（Borrow）**：借用申请、审批、归还等
6. **设备维修模块（Repair）**：维修申请、状态管理等
7. **设备报废模块（Scrap）**：报废申请、审批等
8. **实验室预约模块（Reservation）**：预约申请、审批等
9. **AI智能助手模块（AI）**：智能问答等

## 4. 各模块接口详情

### 4.1 认证模块（Auth）

详细接口见：[认证模块接口文档](./auth.md)

### 4.2 用户管理模块（User）

详细接口见：[用户管理模块接口文档](./user.md)

### 4.3 设备管理模块（Equipment）

详细接口见：[设备管理模块接口文档](./equipment.md)

### 4.4 实验室管理模块（Laboratory）

详细接口见：[实验室管理模块接口文档](./laboratory.md)

### 4.5 设备借用模块（Borrow）

详细接口见：[设备借用模块接口文档](./borrow.md)

### 4.6 设备维修报废模块（Repair-Scrap）

详细接口见：[设备维修报废模块接口文档](./repair-scrap.md)

### 4.7 实验室预约模块（Reservation）

详细接口见：[实验室预约模块接口文档](./reservation.md)

### 4.8 AI智能助手模块（AI）

详细接口见：[AI智能助手模块接口文档](./ai.md)

## 5. 附录

### 5.1 数据类型说明

| 类型 | 描述 |
|------|------|
| String | 字符串类型 |
| Integer | 整数类型 |
| Long | 长整数类型 |
| Double | 双精度浮点数类型 |
| Boolean | 布尔类型 |
| Date | 日期类型（格式：yyyy-MM-dd） |
| DateTime | 日期时间类型（格式：yyyy-MM-dd HH:mm:ss） |
| List | 列表类型 |
| Object | 对象类型 |

### 5.2 状态码说明

#### 5.2.1 用户状态
| 状态码 | 描述 |
|--------|------|
| 0 | 禁用 |
| 1 | 启用 |

#### 5.2.2 设备状态
| 状态码 | 描述 |
|--------|------|
| pending | 待入库 |
| instored | 已入库 |
| inuse | 使用中 |
| repairing | 维修中 |
| scrapped | 报废 |

#### 5.2.3 实验室状态
| 状态码 | 描述 |
|--------|------|
| 0 | 不可用 |
| 1 | 可用 |
| 2 | 维护中 |

#### 5.2.4 申请状态
| 状态码 | 描述 |
|--------|------|
| 0 | 待审批 |
| 1 | 已通过 |
| 2 | 已拒绝 |
| 3 | 已取消 |
| 4 | 已完成 |
| 5 | 已逾期 |

### 5.3 权限说明

| 角色 | 描述 |
|------|------|
| admin | 系统管理员 |
| teacher | 教师 |
| student | 学生 |